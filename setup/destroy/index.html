<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="no-js ie6"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8"><![endif]-->
<!--[if IE 9 ]><html class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    
      
        <title>Destroy - Layer0</title>
      
      
      
        <link rel="canonical" href="https://gitlab.imshealth.com/xfra/layer0/setup/destroy/">
      
      
        <meta name="author" content="xfra">
      
    
    <meta property="og:url" content="https://gitlab.imshealth.com/xfra/layer0/setup/destroy/">
    <meta property="og:title" content="Layer0">
    <meta property="og:image" content="https://gitlab.imshealth.com/xfra/layer0/setup/destroy//../../static/logo_icon.png">
    <meta name="apple-mobile-web-app-title" content="Layer0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
      <link rel="apple-touch-icon" href="../../static/logo_icon.png">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="../../assets/images/favicon-e565ddfa3b.ico">
    <link rel="icon" type="image/x-icon" href="../../assets/images/favicon-e565ddfa3b.ico">
    <style>
      @font-face {
      	font-family: 'Icon';
      	src: url('../../assets/fonts/icon.eot?52m981');
      	src: url('../../assets/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
      		   url('../../assets/fonts/icon.woff?52m981')
               format('woff'),
      		   url('../../assets/fonts/icon.ttf?52m981')
               format('truetype'),
      		   url('../../assets/fonts/icon.svg?52m981#icon')
               format('svg');
      	font-weight: normal;
      	font-style: normal;
      }
    </style>
    <link rel="stylesheet" href="../../assets/stylesheets/application-b64b728552.css">
    
      <link rel="stylesheet" href="../../assets/stylesheets/palettes-05ab2406df.css">
    
    
      
      
      
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,700|Roboto+Mono">
      <style>
        body, input {
          font-family: 'Roboto', Helvetica, Arial, sans-serif;
        }
        pre, code {
          font-family: 'Roboto Mono', 'Courier New', 'Courier', monospace;
        }
      </style>
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script src="../../assets/javascripts/modernizr-4ab42b99fd.js"></script>
    
  </head>
  
  
  
  <body class="palette-primary-red palette-accent-grey">
    
    <div class="backdrop">
      <div class="backdrop-paper"></div>
    </div>
    <input class="toggle" type="checkbox" id="toggle-drawer">
    <input class="toggle" type="checkbox" id="toggle-search">
    <label class="toggle-button overlay" for="toggle-drawer"></label>
    <header class="header">
      <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
          <span class="path">
            
              
                Setup <i class="icon icon-link"></i>
              
            
          </span>
        
        Destroy
      </div>
    </div>
    
    
    <div class="button button-search" role="button" aria-label="Search">
      <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
    </div>
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
    </header>
    <main class="main">
      
      <div class="drawer">
        <nav aria-label="Navigation">
  
  <a href="https://gitlab.imshealth.com/xfra/layer0/" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="../../static/logo_icon.png">
        </div>
      
      <div class="name">
        <strong>Layer0 v0.8.3</strong>
        
      </div>
    </div>
  </a>
  <div class="scrollable">
    <div class="wrapper">
      
      <div class="toc">
        <ul>
          
            
  <li>
    <a class="" title="Home" href="../..">
      Home
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Releases" href="../../releases/">
      Releases
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Introduction" href="../../intro/">
      Introduction
    </a>
    
  </li>

          
            
  <li>
    <span class="section">Setup</span>
    <ul>
      
        
  <li>
    <a class="" title="Install" href="../install/">
      Install
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Upgrade" href="../update/">
      Upgrade
    </a>
    
  </li>

      
        
  <li>
    <a class="current" title="Destroy" href="./">
      Destroy
    </a>
    
      
        
      
      
        <ul>
          
            <li class="anchor">
              <a title="Part 1: Clean Up Your Layer0 Environments" href="#part-1-clean-up-your-layer0-environments">
                Part 1: Clean Up Your Layer0 Environments
              </a>
            </li>
          
            <li class="anchor">
              <a title="Part 2: Destroy the Layer0 instance" href="#part-2-destroy-the-layer0-instance">
                Part 2: Destroy the Layer0 instance
              </a>
            </li>
          
        </ul>
      
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Guides</span>
    <ul>
      
        
  <li>
    <a class="" title="Guestbook" href="../../guides/guestbook/">
      Guestbook
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Guestbook with RDS" href="../../guides/guestbook_rds/">
      Guestbook with RDS
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Consul" href="../../guides/consul/">
      Consul
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Guestbook with Consul" href="../../guides/guestbook_consul/">
      Guestbook with Consul
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Shinken" href="../../guides/shinken/">
      Shinken
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Reference</span>
    <ul>
      
        
  <li>
    <a class="" title="Layer0 CLI" href="../../reference/cli/">
      Layer0 CLI
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Layer0 Setup CLI" href="../../reference/setup-cli/">
      Layer0 Setup CLI
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Updating a service" href="../../reference/updateservice/">
      Updating a service
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Consul" href="../../reference/consul/">
      Consul
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Shinken" href="../../reference/shinken/">
      Shinken
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Task Definitions" href="../../reference/task_definition/">
      Task Definitions
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Architecture" href="../../reference/architecture/">
      Architecture
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="ECR" href="../../reference/ecr/">
      ECR
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Troubleshooting</span>
    <ul>
      
        
  <li>
    <a class="" title="Common Issues" href="../../troubleshooting/commonissues/">
      Common Issues
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Secure Shell (SSH)" href="../../troubleshooting/ssh/">
      Secure Shell (SSH)
    </a>
    
  </li>

      
    </ul>
  </li>

          
        </ul>
        
          <hr>
          <span class="section">The author</span>
          <ul>
            
            
          </ul>
        
      </div>
    </div>
  </div>
</nav>
      </div>
      <article class="article">
        <div class="wrapper">
          
          <h1 id="destroying-a-layer0-instance">Destroying a Layer0 instance<a class="headerlink" href="#destroying-a-layer0-instance" title="Permanent link">#</a></h1>
<p>During testing or migration, you may find that you need to delete a non-functional or outdated instance of Layer0. This section provides procedures for destroying (deleting) a Layer0 instance.</p>
<h2 id="part-1-clean-up-your-layer0-environments">Part 1: Clean Up Your Layer0 Environments<a class="headerlink" href="#part-1-clean-up-your-layer0-environments" title="Permanent link">#</a></h2>
<p>In order to destroy a Layer0 instance, you must first delete all environments in the instance.</p>
<p><strong>To delete Layer0 environments:</strong>
<ol>
  <li>At the command prompt, type the following command to see a list of environments in your Layer0 instance:
    <ul>
      <li class="command"><strong>l0 environment list</strong></li>
    </ul></p>
<p><li>For each environment listed in the previous step, with the exception of the environments that begin with "api", issue the following command (where <em>environmentName</em> is the name of the environment you want to delete):
    <ul>
      <li class="command"><strong>l0 environment delete</strong> <em>environmentName</em> <strong>--wait</strong></li>
    </ul>
  Repeat this step until all of the environments, with the exception of the "api" environments, have been deleted.</li></p>
<p><li>At the command prompt, type the following command to list all of the certificates that exist in your Layer0 instance:
    <ul>
      <li class="command"><strong>l0 certificate list</strong></li>
    </ul>
  </li>
  <li>For each certificate listed in the previous step, with the exception of the certificate named "imshealthlabs", type the following command to delete the certificate (replacing <em>certificateName</em> with the name of the certificate you want to delete):
    <ul>
      <li class="command"><strong>l0 certificate delete</strong> <em>certificateName</em> <strong>--wait</strong></li>
    </ul><br />
    Repeat this step until all of the certificates, with the exception of the "imshealthlabs" certificate, have been deleted. When you have finished deleting the environments and certificates in your Layer0 instance, proceed to Part 2.
  </li>
</ol></p>
<h2 id="part-2-destroy-the-layer0-instance">Part 2: Destroy the Layer0 instance<a class="headerlink" href="#part-2-destroy-the-layer0-instance" title="Permanent link">#</a></h2>
<p>Once you have prepared your Layer0 instance for deletion, you can use the <strong>l0-setup destroy</strong> command to destroy the instance.</p>
<p><strong>To destroy a Layer0 instance:</strong></p>
<ol>

  <li>At the command prompt, type the following command, replacing _prefixName_ with the prefix you created when you created your Layer0 instance:
    <ul>
      <li class="command"><strong>l0-setup destroy</strong> <em>prefixName</em></li>
    </ul>
  </li>
</ol>

<div class="admonition note">
  <p class="admonition-title">Note</p>
  <p>The <strong>l0-setup destroy</strong> operation is idempotent (that is, it has no additional effects if you execute it multiple times with the same parameters). Therefore, if the <strong>destroy</strong> operation fails, you may be able to make it complete by running it again. If the <strong>destroy</strong> operation continues to fail after running it again, please contact the Xfra team on our <a href="https://ims-dev.slack.com/messages/xfra/" class="note">Slack channel</a>.</p>    
</div>
          <aside class="copyright" role="note">
            
            Documentation built with
            <a href="http://www.mkdocs.org" target="_blank">MkDocs</a>
            using the
            <a href="http://squidfunk.github.io/mkdocs-material/" target="_blank">
              Material
            </a>
            theme.
          </aside>
          
            <footer class="footer">
              
  <nav class="pagination" aria-label="Footer">
    <div class="previous">
      
        <a href="../update/" title="Upgrade">
          <span class="direction">
            Previous
          </span>
          <div class="page">
            <div class="button button-previous" role="button" aria-label="Previous">
              <i class="icon icon-back"></i>
            </div>
            <div class="stretch">
              <div class="title">
                Upgrade
              </div>
            </div>
          </div>
        </a>
      
    </div>
    <div class="next">
      
        <a href="../../guides/guestbook/" title="Guestbook">
          <span class="direction">
            Next
          </span>
          <div class="page">
            <div class="stretch">
              <div class="title">
                Guestbook
              </div>
            </div>
            <div class="button button-next" role="button" aria-label="Next">
              <i class="icon icon-forward"></i>
            </div>
          </div>
        </a>
      
    </div>
  </nav>

            </footer>
          
        </div>
      </article>
      <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
          <div class="wrapper">
            <div class="meta"></div>
            <div class="list"></div>
          </div>
        </div>
      </div>
    </main>
    <script>
      var base_url = '../..';
      var repo_id  = '';
    </script>
    <script src="../../assets/javascripts/application-997097ee0c.js"></script>
    
    
  </body>
</html>